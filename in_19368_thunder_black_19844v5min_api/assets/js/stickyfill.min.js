!function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function i(e){return parseFloat(e)||0}function o(e){for(var t=0;e;)t+=e.offsetTop,e=e.offsetParent;return t}function a(){function n(){e.pageXOffset!=p.left?(p.top=e.pageYOffset,p.left=e.pageXOffset,g.refreshAll()):e.pageYOffset!=p.top&&(p.top=e.pageYOffset,p.left=e.pageXOffset,d.forEach(function(e){return e._recalcPosition()}))}function r(){o=setInterval(function(){d.forEach(function(e){return e._fastCheck()})},500)}function i(){clearInterval(o)}if(!c){c=!0,n(),e.addEventListener("scroll",n),e.addEventListener("resize",g.refreshAll),e.addEventListener("orientationchange",g.refreshAll);var o=void 0,a=void 0,s=void 0;"hidden"in t?(a="hidden",s="visibilitychange"):"webkitHidden"in t&&(a="webkitHidden",s="webkitvisibilitychange"),s?(t[a]||r(),t.addEventListener(s,function(){t[a]?i():r()})):r()}}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=!1,l="undefined"!=typeof e;l&&e.getComputedStyle?!function(){t.createElement("div");["","-webkit-","-moz-","-ms-"].some(function(e){try{t.style.position=e+"sticky"}catch(t){}return""!=t.style.position})&&(u=!0)}():u=!0;var c=!1,f="undefined"!=typeof ShadowRoot,p={top:null,left:null},d=[],h=function(){function a(e){if(n(this,a),!(e instanceof HTMLElement))throw new Error("First argument must be HTMLElement");if(d.some(function(t){return t._node===e}))throw new Error("Stickyfill is already applied to this node");this._node=e,this._stickyMode=null,this._active=!1,d.push(this),this.refresh()}return s(a,[{key:"refresh",value:function(){if(!u&&!this._removed){this._active&&this._deactivate();var n=this._node,a=getComputedStyle(n),s={position:a.position,top:a.top,display:a.display,marginTop:a.marginTop,marginBottom:a.marginBottom,marginLeft:a.marginLeft,marginRight:a.marginRight,cssFloat:a.cssFloat};if(!isNaN(parseFloat(s.top))&&"table-cell"!=s.display&&"none"!=s.display){this._active=!0;var l=n.style.position;"sticky"!=a.position&&"-webkit-sticky"!=a.position||(n.style.position="static");var c=n.parentNode,p=f&&c instanceof ShadowRoot?c.host:c,d=n.getBoundingClientRect(),h=p.getBoundingClientRect(),g=getComputedStyle(p);this._parent={node:p,styles:{position:p.style.position},offsetHeight:p.offsetHeight},this._offsetToWindow={left:d.left,right:t.documentElement.clientWidth-d.right},this._offsetToParent={top:d.top-h.top-i(g.borderTopWidth),left:d.left-h.left-i(g.borderLeftWidth),right:-d.right+h.right-i(g.borderRightWidth)},this._styles={position:l,top:n.style.top,bottom:n.style.bottom,left:n.style.left,right:n.style.right,width:n.style.width,marginTop:n.style.marginTop,marginLeft:n.style.marginLeft,marginRight:n.style.marginRight};var m=i(s.top);this._limits={start:d.top+e.pageYOffset-m,end:h.top+e.pageYOffset+p.offsetHeight-i(g.borderBottomWidth)-n.offsetHeight-m-i(s.marginBottom)};var v=g.position;"absolute"!=v&&"relative"!=v&&(p.style.position="relative"),this._recalcPosition();var y=this._clone={};y.node=t.createElement("div"),r(y.node.style,{width:d.right-d.left+"px",height:d.bottom-d.top+"px",marginTop:s.marginTop,marginBottom:s.marginBottom,marginLeft:s.marginLeft,marginRight:s.marginRight,cssFloat:s.cssFloat,padding:0,border:0,borderSpacing:0,fontSize:"1em",position:"static"}),c.insertBefore(y.node,n),y.docOffsetTop=o(y.node)}}}},{key:"_recalcPosition",value:function(){if(this._active&&!this._removed){var e=p.top<=this._limits.start?"start":p.top>=this._limits.end?"end":"middle";if(this._stickyMode!=e){switch(e){case"start":r(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:this._offsetToParent.top+"px",bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"middle":r(this._node.style,{position:"fixed",left:this._offsetToWindow.left+"px",right:this._offsetToWindow.right+"px",top:this._styles.top,bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"end":r(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:"auto",bottom:0,width:"auto",marginLeft:0,marginRight:0})}this._stickyMode=e}}}},{key:"_fastCheck",value:function(){this._active&&!this._removed&&(Math.abs(o(this._clone.node)-this._clone.docOffsetTop)>1||Math.abs(this._parent.node.offsetHeight-this._parent.offsetHeight)>1)&&this.refresh()}},{key:"_deactivate",value:function(){var e=this;this._active&&!this._removed&&(this._clone.node.parentNode.removeChild(this._clone.node),delete this._clone,r(this._node.style,this._styles),delete this._styles,d.some(function(t){return t!==e&&t._parent&&t._parent.node===e._parent.node})||r(this._parent.node.style,this._parent.styles),delete this._parent,this._stickyMode=null,this._active=!1,delete this._offsetToWindow,delete this._offsetToParent,delete this._limits)}},{key:"remove",value:function(){var e=this;this._deactivate(),d.some(function(t,n){return t._node===e._node?(d.splice(n,1),!0):void 0}),this._removed=!0}}]),a}(),g={stickies:d,Sticky:h,forceSticky:function(){u=!1,a(),this.refreshAll()},addOne:function(e){if(!(e instanceof HTMLElement)){if(!e.length||!e[0])return;e=e[0]}for(var t=0;t<d.length;t++)if(d[t]._node===e)return d[t];return new h(e)},add:function(e){if(e instanceof HTMLElement&&(e=[e]),e.length){for(var t=[],n=function(n){var r=e[n];return r instanceof HTMLElement?d.some(function(e){return e._node===r?(t.push(e),!0):void 0})?"continue":void t.push(new h(r)):(t.push(void 0),"continue")},r=0;r<e.length;r++)n(r);return t}},refreshAll:function(){d.forEach(function(e){return e.refresh()})},removeOne:function(e){if(!(e instanceof HTMLElement)){if(!e.length||!e[0])return;e=e[0]}d.some(function(t){return t._node===e?(t.remove(),!0):void 0})},remove:function(e){if(e instanceof HTMLElement&&(e=[e]),e.length)for(var t=function(t){var n=e[t];d.some(function(e){return e._node===n?(e.remove(),!0):void 0})},n=0;n<e.length;n++)t(n)},removeAll:function(){for(;d.length;)d[0].remove()}};u||a(),"undefined"!=typeof module&&module.exports?module.exports=g:l&&(e.Stickyfill=g)}(window,document);