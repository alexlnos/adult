$(window).load(function () {$animImg = $('.animImg'), $animImgWr = $('<div class="animImgWr"></div>'), $animImgShadow = $('<div class="animImgShadow"></div>'), $animImgPlay = $('<div class="animImgPlay" title="Tap or click to play"></div>');$animImg.each(function () {var $this = $(this),imgPath = $this.attr('src'),extStart = imgPath.lastIndexOf('.'),gifPath = imgPath.slice(0, extStart);gifPath += '.gif';$this.data('gifSrc', gifPath);$this.wrap($animImgWr);$this.before('<div class="animImgLoading"></div>');});$animImg.load(function () {var $this = $(this),$siblings = $this.siblings();$siblings.filter('.animImgLoading').remove();$siblings.filter('.animImgShadow').remove();});$(document).on('click', '.animImgShadow, .animImgPlay', function () {var $this = $(this),$thisParent = $this.parent(),$img = $thisParent.find('.animImg'),gifImg = $img.data('gifSrc');$img.attr('src', gifImg);$thisParent.find('.animImgPlay').remove();$thisParent.find('.animImgLoading').css('visibility', 'visible');});var $animImgWrEl = $('.animImgWr');$animImgWrEl.prepend($animImgShadow).prepend($animImgPlay);});